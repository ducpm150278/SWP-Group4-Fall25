<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.1" xmlns="http://xmlns.jcp.org/xml/ns/javaee">
    <!-- USER PROFILE & ACCOUNT MANAGEMENT -->
    <!-- Customer profile management -->
    <servlet>
        <servlet-name>CustomerProfileServlet</servlet-name>
        <servlet-class>controller.CustomerProfileServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>WriteReviewServlet</servlet-name>
        <servlet-class>controller.WriteReviewServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ListRefundsServlet</servlet-name>
        <servlet-class>controller.ListRefundsServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>TicketCheckInServlet</servlet-name>
        <servlet-class>controller.TicketCheckInServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>SupportServlet</servlet-name>
        <servlet-class>controller.SupportServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>StaffSupportServlet</servlet-name>
        <servlet-class>controller.StaffSupportServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>StaffSupportDetailServlet</servlet-name>
        <servlet-class>controller.StaffSupportDetailServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ManagerServlet</servlet-name>
        <servlet-class>controller.ManagerServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>AdminStatisticServlet</servlet-name>
        <servlet-class>controller.AdminStatisticServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>RevenueDataServlet</servlet-name>
        <servlet-class>controller.RevenueDataServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ListRefundsServlet</servlet-name>
        <url-pattern>/list-refunds</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>CustomerProfileServlet</servlet-name>
        <url-pattern>/CustomerProfile</url-pattern>
    </servlet-mapping>
    <!-- Change password functionality -->
    <servlet>
        <servlet-name>ChangePasswordServlet</servlet-name>
        <servlet-class>controller.ChangePasswordServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ViewBookingServlet</servlet-name>
        <servlet-class>controller.ViewBookingServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ChangePasswordServlet</servlet-name>
        <url-pattern>/ChangePassword</url-pattern>
    </servlet-mapping>
    <!-- User logout -->
    <servlet>
        <servlet-name>LogoutServlet</servlet-name>
        <servlet-class>controller.auth.LogoutServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LogoutServlet</servlet-name>
        <url-pattern>/logout</url-pattern>
    </servlet-mapping>
    <!-- Google OAuth callback -->
    <servlet>
        <servlet-name>GoogleAuthCallbackServlet</servlet-name>
        <servlet-class>controller.auth.GoogleAuthCallbackController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GoogleAuthCallbackServlet</servlet-name>
        <url-pattern>/GoogleAuthCallback</url-pattern>
    </servlet-mapping>
    <!-- FOOD & COMBO MANAGEMENT -->
    <!-- Food management -->
    <servlet>
        <servlet-name>FoodManagementServlet</servlet-name>
        <servlet-class>controller.FoodManagementServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>FoodManagementServlet</servlet-name>
        <url-pattern>/food-management</url-pattern>
    </servlet-mapping>
    <!-- Combo management -->
    <servlet>
        <servlet-name>ComboManagementServlet</servlet-name>
        <servlet-class>controller.ComboManagementServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ComboManagementServlet</servlet-name>
        <url-pattern>/combo-management</url-pattern>
    </servlet-mapping>
    <!-- ComboFood relationships -->
    <servlet>
        <servlet-name>ComboFoodManagementServlet</servlet-name>
        <servlet-class>controller.ComboFoodManagementServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ComboFoodManagementServlet</servlet-name>
        <url-pattern>/combo-food-management</url-pattern>
    </servlet-mapping>
    <!-- AUTHENTICATION & EMAIL VERIFICATION -->
    <!-- Main authentication controller -->
    <servlet>
        <servlet-name>AuthController</servlet-name>
        <servlet-class>controller.auth.AuthController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AuthController</servlet-name>
        <url-pattern>/auth/*</url-pattern>
    </servlet-mapping>
    <!-- Google OAuth authentication -->
    <servlet>
        <servlet-name>GoogleAuthController</servlet-name>
        <servlet-class>controller.auth.GoogleAuthController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GoogleAuthController</servlet-name>
        <url-pattern>/auth/google</url-pattern>
    </servlet-mapping>
    <!-- Email verification -->
    <servlet>
        <servlet-name>VerifyEmailServlet</servlet-name>
        <servlet-class>controller.VerifyEmailServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>VerifyEmailServlet</servlet-name>
        <url-pattern>/VerifyEmail</url-pattern>
    </servlet-mapping>
    <!-- GUEST MOVIE BROWSING -->
    <!-- Guest movie list -->
    <servlet>
        <servlet-name>GuestMovieListServlet</servlet-name>
        <servlet-class>controller.guest.GuestMovieListServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GuestMovieListServlet</servlet-name>
        <url-pattern>/guest-movies</url-pattern>
    </servlet-mapping>
    <!-- Guest movie detail -->
    <servlet>
        <servlet-name>GuestMovieDetailServlet</servlet-name>
        <servlet-class>controller.guest.GuestMovieDetailServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GuestMovieDetailServlet</servlet-name>
        <url-pattern>/guest-movie-detail</url-pattern>
    </servlet-mapping>
    <!-- BOOKING SYSTEM -->
    <!-- Test servlet for booking system -->
    <servlet>
        <servlet-name>BookingTestServlet</servlet-name>
        <servlet-class>controller.BookingTestServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingTestServlet</servlet-name>
        <url-pattern>/booking/test</url-pattern>
    </servlet-mapping>
    <!-- Step 1: Select screening -->
    <servlet>
        <servlet-name>BookingSelectScreeningServlet</servlet-name>
        <servlet-class>controller.booking.BookingSelectScreeningServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingSelectScreeningServlet</servlet-name>
        <url-pattern>/booking/select-screening</url-pattern>
    </servlet-mapping>
    <!-- Step 2: Select seats -->
    <servlet>
        <servlet-name>BookingSeatSelectionServlet</servlet-name>
        <servlet-class>controller.booking.BookingSeatSelectionServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingSeatSelectionServlet</servlet-name>
        <url-pattern>/booking/select-seats</url-pattern>
    </servlet-mapping>
    <!-- Step 3: Select food (optional) -->
    <servlet>
        <servlet-name>BookingFoodSelectionServlet</servlet-name>
        <servlet-class>controller.booking.BookingFoodSelectionServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingFoodSelectionServlet</servlet-name>
        <url-pattern>/booking/select-food</url-pattern>
    </servlet-mapping>
    <!-- Step 4: Payment -->
    <servlet>
        <servlet-name>BookingPaymentServlet</servlet-name>
        <servlet-class>controller.booking.BookingPaymentServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingPaymentServlet</servlet-name>
        <url-pattern>/booking/payment</url-pattern>
    </servlet-mapping>
    <!-- VNPay callback -->
    <servlet>
        <servlet-name>VNPayCallbackServlet</servlet-name>
        <servlet-class>controller.booking.VNPayCallbackServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>VNPayCallbackServlet</servlet-name>
        <url-pattern>/vnpay-callback</url-pattern>
    </servlet-mapping>
    <!-- VNPay IPN (Instant Payment Notification) -->
    <servlet>
        <servlet-name>VNPayIPNServlet</servlet-name>
        <servlet-class>controller.VNPayIPNServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>VNPayIPNServlet</servlet-name>
        <url-pattern>/vnpay-ipn</url-pattern>
    </servlet-mapping>
    <!-- SESSION CONFIGURATION -->
    <servlet-mapping>
        <servlet-name>WriteReviewServlet</servlet-name>
        <url-pattern>/writeReview</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ViewBookingServlet</servlet-name>
        <url-pattern>/view-booking</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>TicketCheckInServlet</servlet-name>
        <url-pattern>/staff-check-in</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>SupportServlet</servlet-name>
        <url-pattern>/support</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>StaffSupportServlet</servlet-name>
        <url-pattern>/staff-support</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>StaffSupportDetailServlet</servlet-name>
        <url-pattern>/staff-support-detail</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ManagerServlet</servlet-name>
        <url-pattern>/manager</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>AdminStatisticServlet</servlet-name>
        <url-pattern>/admin-statistic</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RevenueDataServlet</servlet-name>
        <url-pattern>/api/revenue-data</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
</web-app>
